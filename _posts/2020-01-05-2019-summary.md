---
layout: post
title: 2019 å¹´æ€»ç»“
categories: summary
tags: note, annual
usemathjax: false
---

* content
{:toc}

# 4 æœˆä¹‹å‰

2019 å¹´ 4 æœˆï¼Œä¼é¹…ç¦»èŒï¼Œæƒ³å†™ç‚¹è‡ªå·±çš„ä»£ç ã€‚æ¥è§¦äº†ä¸€ç‚¹ freelancer å¹³å°ï¼Œå¦‚ [freelancer](https://www.freelancer.com)ã€[fiverr](https://www.fiverr.com)ï¼Œæ‰å‘ç°è‡ªç”±èŒä¸šè€…çœŸæ˜¯ä¸å®¹æ˜“ï¼Œå…‰é²œäº®ä¸½çš„èƒŒåæ˜¯é«˜æ˜‚çš„è·¨å¢ƒè½¬è´¦æ‰‹ç»­è´¹ã€‚

4 æœˆä¹‹å‰çš„äº‹å¤§å¤šå·²ç»å¿˜è®°ï¼Œåªè®°å¾—åˆ·äº†ä¸€äº› leetcode medium éš¾åº¦çš„é¢˜ç›®ï¼›çœ‹å®Œäº† [ç‰›å¥¶å¯ä¹ç»æµå­¦]ï¼›çœ‹å®Œäº† [è‡ªæ§åŠ›]ï¼Œç²¾é«“åªæœ‰ 2 ä¸ªå­—ã€Œé”»ç‚¼ã€~~(å¯æƒœæˆ‘æ²¡æœ‰åšåˆ° ğŸ˜¿~~ã€‚

é‚£ä¸ªæ—¶å€™ï¼Œé€šè¿‡ [too many lists]ã€[rust by example] å’Œ [trpl] å­¦ä¹ äº† **rust**ã€‚æ‹¿ `uuid` ç»ƒæ‰‹ï¼Œå†™äº†ä¸€ä¸ª `uuid` çš„åº“ [yauuid]ã€‚

ä¸å¾—ä¸æçš„è¿˜æœ‰å¦å¤–ä¸€ä¸ªæœªå®Œæˆå“ [sleepyhead]ï¼Œå®ƒç‹ ç‹ åœ°æŠŠæˆ‘æ‘åœ¨åœ°ä¸Šæ‘©æ“¦ã€‚å½“åˆæ˜¯æƒ³æä¸ªåŸºäº **stackfull** çš„ `coroutine` ç½‘ç»œè°ƒåº¦åº“ï¼Œç»“æœæœ€ä¸»è¦çš„è°ƒåº¦åŠŸèƒ½å®Œå…¨æ²¡å®ç°ã€‚ç©¶å…¶åŸå› ï¼Œè¿˜æ˜¯å¤ªé«˜ä¼°è‡ªå·±æŒæ¡ **rust** çš„ç¨‹åº¦äº†ï¼Œæ­¥å­è¿ˆå¾—å¤ªå¤§ã€‚

éš¾å¾—çš„æ˜¯ï¼Œå¸¸åœ¨è§’è½åƒç°çš„ Switch ç»ˆäºå‡ºåœºäº† 2 æ¬¡:

- `Splitter Critters` ä¿ƒé”€ã€ä¹°ã€é€šå…³ã€Archive ä¸€æ°”å‘µæˆ
- `è–„æš®ä¼ è¯´` ä¸€å‘¨ç›®ï¼Œå¯æ€œéƒ½é€šå…³äº†è¿˜ä¸ä¼šæ”¾ç§˜å¥¥æŠ€

# 4 æœˆæ˜¯ä½ çš„è°è¨€

é¢è¯• `PingCAP`ï¼Œå‰é¢çš„ `miniwork` æ˜¯è¦å®ç° [external sort]ã€‚ä»¥ 8 ä¸ªæœˆåçš„è§†è§’æ¥çœ‹[è¿™ä»½ä»£ç ](https://github.com/condy0919/top100)ï¼Œå½“æ—¶æ²¡å†™ `Executor` æ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ

~~å—¯ï¼Œè·ªäº†~~

å™”å™”å™”å™”ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå°æ’æ›²ï¼Œè®©æˆ‘å‘ç°äº†è®¸å¤šæœ‰è¶£çš„é¡¹ç›®ï¼Œå¦‚ [katran]ã€[knot dns]ã€‚ä¸è¿‡ç”±äºè¿™ä¸ªæ’æ›²ç¼–å†™å¾—ä¸æ˜¯å¾ˆå®Œç¾ï¼Œä¸€äº›è®¡åˆ’ä¹Ÿæˆ›ç„¶ä¸­æ­¢äº†ã€‚

# 4 æœˆä¹‹å

éšåï¼Œæˆ‘å¼€å§‹ç–¯ç‹‚å¯»æ‰¾ `Executor` ç›¸å…³çš„ææ¡ˆã€‚

åˆè§è¿™ä¸ª [Group](https://github.com/executors/)ï¼Œä»¥ä¸ºæ‰¾åˆ°äº†å¸Œæœ›ï¼Œä¸€çœ‹é‡Œé¢çš„å®ç°ï¼Œå…¨æ˜¯ç©å…·ã€‚æ— æ„ä¸­å‘ç° [folly] åº•ä¸‹æœ‰ä¸ª `pushmi` å­åº“ï¼Œé‚ç ”ç©¶ã€‚

çœ‹ç€æ»¡å±çš„æ¨¡æ¿ï¼Œæˆ‘å“­äº†ã€‚

...

æœŸé—´æ‰¾äº†æ— æ•°çš„ææ¡ˆï¼Œæ…¢æ…¢åœ°åˆ°äº† `CppCon 2019` çš„å­£èŠ‚â€¦â€¦

## CppCon 2019

- Andrei Alexandrescu - Speed Is Found In The Minds of People

  å¯å‘æ„ä¹‰ï¼Œ **Try silly things!**

- Miro Knejp â€œNon-conforming C++: the Secrets the Committee Is Hiding From Youâ€

  å¯Œæœ‰æ¿€æƒ…çš„æ¼”è®²ï¼Œ`switch case` vs `computed goto` ç­‰ä¸€ç³»åˆ—ç¼–è¯‘å™¨æ‰©å±•

- Eric Niebler, David Hollman â€œA Unifying Abstraction for Async in C++â€

## Emacs â¤ï¸ Vim

å½“çœ‹ç€ `rust` ç¤¾åŒºä½¿ç”¨ `vim` å¯ä»¥è®©æ–‡æ¡£å‹æ³¨é‡Šä¸­çš„ä»£ç å—é«˜äº®æ—¶ï¼Œä½œä¸ºä¸€ä¸ª `c++` ç”¨æˆ·æ„Ÿåˆ°å¥½ç¾¡æ…•å•Šã€‚ä¸çŸ¥ä¸è§‰ï¼Œè§‰å¾—å†™æ³¨é‡Šä¹Ÿæ˜¯ä¸€ä»¶éå¸¸æœ‰æˆå°±æ„Ÿçš„äº‹æƒ…ã€‚
äºæ˜¯èŠ±äº†å‡ å¤©æ—¶é—´ï¼Œä» [rust.vim](https://github.com/rust-lang/rust.vim) é‡ŒæŠŠå¯¹åº”é«˜äº®è¯­æ³•å—çš„éƒ¨åˆ†æŠ½äº†å‡ºæ¥ï¼Œå¢åŠ äº†å¯¹ `c/c++` çš„æ”¯æŒï¼Œç®—æ˜¯ä¸€ç‚¹å¾®å°çš„ [è´¡çŒ®](https://github.com/condy0919/docom.vim) å§ :)

ç»è¿‡ [iovxw](https://github.com/iovxw/) çš„å®‰åˆ©ä»¥åŠè‡ªå·±ä¸æ–­åœ°å­¦ä¹ ~~æŠ„è¢­~~åˆ«äººçš„ `emacs` é…ç½®ï¼Œç»ˆäºæœ‰ä¸€ä¸ªæ¯”è¾ƒèˆ’é€‚çš„é…ç½®äº†ã€‚

è€Œé€‰æ‹© `emacs` çš„åŸå› æ˜¯å®ƒçš„æ¸²æŸ“å¤ªå¥½çœ‹äº†ï¼

é…ç½®ä¸»è¦å‚è€ƒäº†

- [Centaur Emacs](https://github.com/seagle0128/.emacs.d) é…ç½®çš„ç»„ç»‡æ–¹å¼ä¹Ÿæ˜¯ä»è¿™é‡Œå­¦æ¥çš„ï¼Œæ„Ÿè°¢ï¼
- [ladicle's config](https://ladicle.com/post/config/)

ä½œä¸ºä¸€ä¸ª 6 å¹´ `vim` ç”¨æˆ·ï¼Œæœ¬èº«å·²ç¦»ä¸å¼€ `vim` æ‰€æä¾›çš„ç¼–è¾‘è¾“å…¥æ¨¡å¼ï¼Œè€Œä¸”è¿™ç§æ–¹å¼è‡ªå·±æ„Ÿè§‰ä¹Ÿæ¯”è¾ƒèˆ’æœï¼Œæ‰€ä»¥æˆ‘é€‰æ‹© `evil-mode`ã€‚
å†åŠ ä¸Šæœ¬èº«æ‰€ä½¿ç”¨çš„ `vim` æ’ä»¶ä¸å¤šï¼Œä¹Ÿå°±å¾ˆé¡ºç•…å¾—è¿ç§»è¿‡å»äº†ã€‚

åœ¨ä½¿ç”¨ [bazel] çš„åŒæ—¶ï¼Œæ°´äº†ä¸€äº› [emacs-bazel-mode](https://github.com/bazelbuild/emacs-bazel-mode/commits?author=condy0919) çš„ pr.

## Bipolar

ç”±äº `bipolar` æ˜¯ä¸€ä¸ªå…¨æ–°çš„ `c++` é¡¹ç›®ï¼Œå¯¹äºæ„å»ºç³»ç»Ÿçš„é€‰æ‹©å¯ä»¥å¤§èƒ†ä¸€ç‚¹ã€‚å½“æ—¶è€ƒè™‘çš„ä¸»è¦æœ‰ `bazel`, `CMake`, `meson`, `gn` å’Œ `please`ã€‚

- `CMake` ä½œä¸º `Makefile` çš„å± é¾™å‹‡è€…ï¼Œå¹¶ä¸”é€šè¿‡ [FetchContent](https://cmake.org/cmake/help/latest/module/FetchContent.html) ä¹Ÿå¯ä»¥æ¯”è¾ƒå¥½çš„è§£å†³é—®é¢˜ã€‚ä½†æ˜¯å®ƒçš„å†…å»ºç±»å‹æ„å»ºåœ¨ `string` ä¹‹ä¸Šï¼Œæ“ä½œèµ·æ¥å°¤å…¶éº»çƒ¦ã€‚
- `meson` å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªè¯­æ³•ä¼˜é›…ç‰ˆæœ¬çš„ `CMake`ï¼Œä½¿ç”¨çš„æ¦‚å¿µä¸ `CMake` ç±»ä¼¼ï¼Œæ²¡æœ‰æ–°æ„ï¼Œä¸å–œã€‚
- `gn` ä½œä¸º `chromium` çš„å‰¯äº§ç‰©ï¼Œå®åŠ›æ— åº¸ç½®ç–‘ã€‚ä½†æ˜¯å®ƒéœ€è¦**é¢å¤–**é…ç½® `toolchains` è§„åˆ™ã€‚æœ¬ç€ä¸æƒ³ç»´æŠ¤å…¶ä»– `gn` æ–‡ä»¶çš„åŸåˆ™ï¼Œ`gn` åœ¨è¿™é‡Œå°±å‡ºå±€äº†ã€‚
- `please` æ˜¯åœ¨çœ‹åˆ° [è¿™ç¯‡æ–‡ç« ](https://zhuanlan.zhihu.com/p/55452964) æ—¶å‘ç°çš„ï¼Œè¯•ç”¨ä¹‹åæ„Ÿè§‰ä¸é”™ã€‚**ä½†æ˜¯**ï¼Œè¿æœ€åŸºç¡€çš„ `cc_test` éƒ½å‡ºé”™çš„æ—¶å€™ï¼Œç›´æ¥æ”¾å¼ƒäº†ã€‚4 ä¸ªæœˆä¹‹åä¿®å¤äº†ï¼Œè§è¿™ä¸ª[é“¾æ¥](https://github.com/thought-machine/please/issues/577).
- `bazel` ä½œä¸ºå”¯ä¸€èƒ½ç”¨çš„ä¸€ä¸ªï¼Œå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯ä¾èµ–äº† `jvm`ï¼Œä»¥è‡³äºæœ‰æ—¶å€™ä¼šæœ‰ `CI` ä¸Šè·‘ç€æµ‹è¯•ä¼šè§¦å‘ `OOM`...

åœ¨é€‰å®šäº† `bazel` ä¹‹åå°±æ˜¯å®Œå–„ä¸€ä¸‹å®ƒå¸¸ç”¨çš„ä¸€äº›é€‰é¡¹äº†ï¼Œå¦‚ `sanitizer`, [kcov]... æœ‰æ—¶å€™çœŸçš„å¾ˆç¾¡æ…• `rust` ç”¨æˆ·ï¼Œå› ä¸ºè¿™äº›å·¥å…·åˆ«äººå·²ç»åšå¥½å¹¶ä¸”å‘å¸ƒåˆ° [crates](https://crates.io)ï¼Œåªéœ€è¦ `cargo` å®‰è£…ä¸€ä¸‹ã€‚

ä»¥ç®€å•çš„ `echo server` æµ‹è¯•äº†ä¸€ä¸‹ `io_uring` çš„ç½‘ç»œ IO æ€§èƒ½ï¼Œç›¸å¯¹äºåŸºäº `epoll` çš„ `echo server` ç²—ç•¥ä¼°è®¡ä¼˜ **13%**ï¼Œå½“ç„¶ [è¿™](https://twitter.com/CondyChen/status/1170567616525557760) å®Œå®Œå…¨å…¨ä¸èƒ½ä½œä¸ºåŸºå‡†ã€‚

æ­¤å¤–ï¼Œåœ¨ç¼–å†™çš„è¿‡ç¨‹ä¸­ä¹Ÿå‘ç”Ÿäº†ä¸€ç‚¹æœ‰è¶£çš„äº‹æƒ…ï¼š

- é‡åˆ°äº† 2 ä¸ª [clang bug](https://github.com/condy0919/bipolar/issues/21)
- `UdpSocket` å¯ä»¥ä½¿ç”¨ `connect` æ¥è®¾ç½®è¿œç«¯åœ°å€ä»¥å¯ä»¥ä½¿ç”¨ `send`/`recv`ï¼Œå½“ç„¶è¿™ä¹Ÿç®—æ˜¯ä¸€ç§è¿‡æ»¤ `UDP` åŒ…æ‰‹æ®µã€‚

[bipolar](https://github.com/condy0919/bipolar) é‡Œè¿˜æœ‰è®¸å¤šä¸œè¥¿æ²¡æœ‰å†™ï¼Œä¾‹å¦‚æœ€é‡è¦çš„ `Promise`.

TODO

## åŠ¨æ¼«

èˆ Hime

è‡´éƒç•ªï¼Œè¿˜å¥½æœ€åå…¨å‘˜ç™½é­”æ³•å¤æ´»ã€‚æˆ‘çš„èƒƒå¥½ç—› ğŸ˜­

[bazel]: https://github.com/bazelbuild/bazel/
[external sort]: https://en.wikipedia.org/wiki/External_sorting
[knot dns]: https://www.knot-dns.cz/
[too many lists]: https://cglab.ca/~abeinges/blah/too-many-lists/book/README.html
[rust by example]: https://doc.rust-lang.org/rust-by-example/
[trpl]: https://doc.rust-lang.org/book/
[yauuid]: https://github.com/condy0919/uuid
[sleepyhead]: https://github.com/condy0919/sleepyhead
[katran]: https://github.com/facebookincubator/katran
[folly]: https://github.com/facebook/folly/
[kcov]: https://github.com/SimonKagstrom/kcov
[ç‰›å¥¶å¯ä¹ç»æµå­¦]: https://book.douban.com/subject/3000997/
[è‡ªæ§åŠ›]: https://book.douban.com/subject/10786473/
